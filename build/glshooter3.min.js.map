{"version":3,"file":"glshooter3.min.js","sources":["../scripts/_pre.js","../scripts/_assets.js","../scripts/tm/asset/font.js","../scripts/tm/asset/threejson.js","../scripts/tm/hybrid/hybridapp.js","../scripts/tm/hybrid/hybridscene.js","../scripts/tm/hybrid/threeelement.js","../scripts/tm/hybrid/mesh.js","../scripts/tm/hybrid/camera.js","../scripts/main.js"],"names":["gls3","W","H","assets","titleFont","uiFont","numberFont","test","url","type","tm","define","superClass","init","path","key","this","superInit","testElement","dom","Element","create","style","set","format","text","before","element","offsetWidth","fontFaceStyleElement","checkLoadFont","remove","flare","console","debug","setTimeout","bind","asset","Loader","register","font","WebFont","mesh","ThreeJSON","loader","THREE","JSONLoader","load","geometry","materials","shading","FlatShading","Mesh","MeshFaceMaterial","canvas","setupThree","background","threeRenderer","WebGLRenderer","antialias","parentNode","appendChild","domElement","threeCanvas","fitWindow","everFlag","_fitFunc","undefined","e","s","position","margin","left","top","bottom","right","rateWidth","width","window","innerWidth","rateHeight","height","innerHeight","rate","addEventListener","display","CanvasApp","prototype","call","_update","app","BaseApp","scene","currentScene","awake","hybrid","HybridScene","updater","update","three","camera","_draw","render","resize","w","h","setSize","aspect","Three","renderer","threeObject","Scene","Camera","z","light","DirectionalLight","normalize","add","addChild","child","parent","children","push","ThreeElement","event","Event","dispatchEvent","removeChild","index","indexOf","splice","accessor","get","v","x","y","scale","rotation","up","useQuaternion","quaternion","visible","lookAt","target","threeJSON","Manager","error","PerspectiveCamera","fov","main","HybridApp","prepend","fps","pushScene","ui","LoadingScene","nextScene","Main","run","fromJSON","bg","fillStyle","strokeStyle","alpha","originX","originY","tltleLabel","fontFamily","uiLabel","numberLabel","addChildTo","on","kb","keyboard","kd","getKeyDirection","mul","from","Quaternion","copy","to","step","m1","Matrix4","frame","slerp","setFromRotationMatrix","tweener","clear"],"mappings":"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"}