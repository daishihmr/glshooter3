{"version":3,"file":"glshooter3.min.js","sources":["../scripts/_pre.js","../scripts/_assets.js","../scripts/tm/asset/font.js","../scripts/tm/asset/threejson.js","../scripts/tm/hybrid/hybridapp.js","../scripts/tm/hybrid/hybridscene.js","../scripts/tm/hybrid/threeelement.js","../scripts/tm/hybrid/mesh.js","../scripts/tm/hybrid/camera.js","../scripts/main.js"],"names":["gls3","W","H","assets","titleFont","uiFont","numberFont","test","url","type","tm","define","superClass","init","path","key","this","superInit","testElement","dom","Element","create","style","set","format","text","before","element","offsetWidth","fontFaceStyleElement","checkLoadFont","remove","flare","console","debug","setTimeout","bind","asset","Loader","register","font","WebFont","mesh","ThreeJSON","loader","THREE","JSONLoader","load","geometry","materials","log","Mesh","MeshFaceMaterial","canvas","setupThree","background","threeRenderer","WebGLRenderer","antialias","parentNode","appendChild","domElement","threeCanvas","fitWindow","everFlag","_fitFunc","undefined","e","s","position","margin","left","top","bottom","right","rateWidth","width","window","innerWidth","rateHeight","height","innerHeight","rate","addEventListener","display","CanvasApp","prototype","call","_update","app","BaseApp","scene","currentScene","awake","hybrid","HybridScene","updater","update","three","camera","_draw","render","resize","w","h","setSize","aspect","Three","renderer","threeObject","Scene","Camera","z","ambientLight","AmbientLight","add","directionalLight","DirectionalLight","normalize","addChild","child","parent","children","push","ThreeElement","event","Event","dispatchEvent","removeChild","index","indexOf","splice","accessor","get","v","x","y","scale","rotation","up","useQuaternion","quaternion","visible","lookAt","target","threeJSON","Manager","error","PerspectiveCamera","fov","main","HybridApp","prepend","fps","pushScene","ui","LoadingScene","nextScene","Main","run","fromJSON","tltleLabel","fontFamily","uiLabel","numberLabel","addChildTo","on","rotationX","rotationY","kb","keyboard","kd","getKeyDirection","mul","from","Quaternion","copy","to","step","slerp","m1","Matrix4","tweener","clear","setFromRotationMatrix","setLoop"],"mappings":"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"}